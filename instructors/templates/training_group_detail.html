<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ training_group.group_name }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1, h2 {
            color: #333;
        }

        .passed {
            color: green;
            font-weight: bold;
        }

        .failed {
            color: red;
            font-weight: bold;
        }

        .parachutist-name {
            color: #007bff;
            text-decoration: none;
        }

        .parachutist-name:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<h1>Учебная группа: {{ training_group.group_name }}</h1>
<p><strong>Инструктор:</strong> {{ instructor.first_name }} {{ instructor.last_name }}</p>
<p><strong>Статус:</strong> {{ training_group.get_status_display }}</p>
<p><strong>Дата начала:</strong> {{ training_group.start_date_time|date:"d.m.Y H:i" }}</p>
{% if training_group.end_date_time %}
    <p><strong>Дата окончания:</strong> {{ training_group.end_date_time|date:"d.m.Y H:i" }}</p>
{% endif %}

<!-- Кнопки для изменения статуса группы -->
{% if training_group.status == 'created' %}
    <a href="{% url 'start_training' instructor_id=instructor.instructor_id training_group_id=training_group.group_id %}">
        <button>Начать обучение</button>
    </a>
{% elif training_group.status == 'in_progress' %}
    <a href="{% url 'complete_training' instructor_id=instructor.instructor_id training_group_id=training_group.group_id %}">
        <button>Завершить обучение</button>
    </a>
{% endif %}

<h2>Парашютисты</h2>
{% if group_parachutists %}
    <ul>
        {% for gp in group_parachutists %}
            <li>
                <strong>
                    <!-- Ссылка на фамилию парашютиста -->
                    <a href="{% url 'edit_training_checkpoint' instructor_id=instructor.instructor_id training_group_id=training_group.group_id parachutist_id=gp.parachutist.parachutist_id %}" class="parachutist-name">
                        {{ gp.parachutist.first_name }} {{ gp.parachutist.last_name }}
                    </a>
                </strong>
                <ul>
                    <li>Теория: <span class="{% if gp.theory_passed %}passed{% else %}failed{% endif %}">
                        {% if gp.theory_passed %}✔ Пройдено{% else %}✖ Не пройдено{% endif %}
                    </span></li>
                    <li>Практика: <span class="{% if gp.practice_passed %}passed{% else %}failed{% endif %}">
                        {% if gp.practice_passed %}✔ Пройдено{% else %}✖ Не пройдено{% endif %}
                    </span></li>
                    <li>Экзамен: <span class="{% if gp.exam_passed %}passed{% else %}failed{% endif %}">
                        {% if gp.exam_passed %}✔ Пройдено{% else %}✖ Не пройдено{% endif %}
                    </span></li>
                    <li>Готов к прыжку: <span class="{% if gp.ready_for_jump %}passed{% else %}failed{% endif %}">
                        {% if gp.ready_for_jump %}✔ Да{% else %}✖ Нет{% endif %}
                    </span></li>
                    {% if training_group.status == 'Created' %}
                        <li>
                            <a href="{% url 'edit_training_checkpoint' instructor_id=instructor.instructor_id training_group_id=training_group.group_id parachutist_id=gp.parachutist.parachutist_id %}">
                                Редактировать чекпоинты
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>В этой группе пока нет парашютистов.</p>
{% endif %}

<p><a href="{% url 'instructor_schedule' instructor_id=instructor.instructor_id %}">← Назад к расписанию</a></p>
</body>
</html>
